<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Git コミットメッセージツール</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      #displayMessage {
        background-color: black;
        color: limegreen;
        font-family: "Courier New", Courier, monospace;
        padding: 10px;
        border-radius: 5px;
        margin-top: 10px;
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <div class="container mx-auto p-5">
      <p id="displayMessage" class="text-center"></p>
      <div class="max-w-md mx-auto bg-white p-5 rounded shadow">
        <form>
          <div class="mb-4">
            <label
              for="commitType"
              class="block text-gray-700 text-sm font-bold mb-2"
              >コミットタイプ:</label
            >
            <select
              id="commitType"
              class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              onchange="updateCommitMessage()"
            >
              <option value="build">build</option>
              <option value="chore">chore</option>
              <option value="ci">ci</option>
              <option value="docs">docs</option>
              <option value="feat">feat</option>
              <option value="fix">fix</option>
              <option value="perf">perf</option>
              <option value="refactor">refactor</option>
              <option value="revert">revert</option>
              <option value="style">style</option>
              <option value="test">test</option>
              <option value="Build">Build</option>
              <option value="Chore">Chore</option>
              <option value="Ci">Ci</option>
              <option value="Docs">Docs</option>
              <option value="Feat">Feat</option>
              <option value="Fix">Fix</option>
              <option value="Perf">Perf</option>
              <option value="Refactor">Refactor</option>
              <option value="Revert">Revert</option>
              <option value="Style">Style</option>
              <option value="Test">Test</option>
            </select>
          </div>
          <div class="mb-6">
            <label
              for="commitMessage"
              class="block text-gray-700 text-sm font-bold mb-2"
              >コミットメッセージ:</label
            >
            <textarea
              id="commitMessage"
              name="commitMessage"
              rows="4"
              class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              placeholder="コミットメッセージを入力してください"
            ></textarea>
          </div>
          <div class="flex items-center justify-between">
            <button
              type="button"
              id="copyButton"
              class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
            >
              コピー
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      const commitMessageKey = "gitCommitMessage";
      const commitTypeKey = "gitCommitType";
      const commitMessageTemplates = {
        build: "ビルドシステムを更新しました。",
        chore: "定期的なタスクを実行しました。",
        ci: "CIの設定を更新しました。",
        docs: "ドキュメントを更新しました。",
        feat: "新しい機能を追加しました。",
        fix: "バグを修正しました。",
        perf: "パフォーマンスを向上させました。",
        refactor: "コードをリファクタリングしました。",
        revert: "以前のコミットを取り消しました。",
        style: "コードのスタイルを整えました。",
        test: "テストを追加しました。",
        Build: "ビルドシステムを更新しました。",
        Chore: "定期的なタスクを実行しました。",
        Ci: "CIの設定を更新しました。",
        Docs: "ドキュメントを更新しました。",
        Feat: "新しい機能を追加しました。",
        Fix: "バグを修正しました。",
        Perf: "パフォーマンスを向上させました。",
        Refactor: "コードをリファクタリングしました。",
        Revert: "以前のコミットを取り消しました。",
        Style: "コードのスタイルを整えました。",
        Test: "テストを追加しました。",
      };

      function updateCommitMessage() {
        const type = document.getElementById("commitType").value;
        const template = commitMessageTemplates[type];
        document.getElementById("commitMessage").value = template;
        saveCommitMessage();
      }

      function saveCommitMessage() {
        const message = document.getElementById("commitMessage").value;
        const type = document.getElementById("commitType").value;
        const fullMessage = `${type}: ${message}`;
        localStorage.setItem(commitMessageKey, fullMessage);
        document.getElementById("displayMessage").textContent = fullMessage;
      }

      function loadCommitMessage() {
        const savedMessage = localStorage.getItem(commitMessageKey);
        if (savedMessage) {
          const [type, ...messageParts] = savedMessage.split(": ");
          const message = messageParts.join(": ");
          document.getElementById("commitMessage").value = message;
          document.getElementById("commitType").value = type;
          document.getElementById(
            "displayMessage"
          ).textContent = `${type}: ${message}`;
        }
      }

      function copyToClipboard() {
        const fullMessage = localStorage.getItem(commitMessageKey);
        navigator.clipboard.writeText(fullMessage).then(() => {
          const copyButton = document.getElementById("copyButton");
          copyButton.textContent = "コピーOK";
          setTimeout(() => {
            copyButton.textContent = "コピー";
          }, 2000);
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        loadCommitMessage();
        document
          .getElementById("commitMessage")
          .addEventListener("input", saveCommitMessage);
        document
          .getElementById("commitType")
          .addEventListener("change", saveCommitMessage);
        document
          .getElementById("copyButton")
          .addEventListener("click", copyToClipboard);
      });
    </script>
  </body>
</html>
